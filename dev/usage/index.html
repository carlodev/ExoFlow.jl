<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Usage · ExoFlow.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ExoFlow.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Usage</a></li><li><a class="tocitem" href="../mpi/">MPI Run</a></li><li><a class="tocitem" href="../numericsettings/">Numeric Settings</a></li><li><span class="tocitem">Cases</span><ul><li><a class="tocitem" href="../Cases/taylorgreen/">Taylor Green</a></li><li><a class="tocitem" href="../Cases/liddriven/">Lid Driven Cavity Flow</a></li><li><a class="tocitem" href="../Cases/cylinder/">Cylinder</a></li><li><a class="tocitem" href="../Cases/channel/">Channel</a></li><li><a class="tocitem" href="../Cases/airfoil/">Airfoil</a></li></ul></li><li><a class="tocitem" href="../ref/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Usage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/carlodev/ExoFlow.jl/blob/master/docs/src/usage.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Package-usage"><a class="docs-heading-anchor" href="#Package-usage">Package usage</a><a id="Package-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Package-usage" title="Permalink"></a></h1><p>The package allows the user to set a wide variety of options. Problem Settings:</p><ul><li><code>:N</code> = number of divisions for each dimension. The example creates a 100x100 grid.</li><li><code>:D</code> = dimension. It can be 2 or 3.</li><li><code>:order</code> = order of the elements. At the moment just the order 1 is tested.</li><li><code>:case</code> it can be <code>&quot;TaylorGreen&quot;, &quot;LidDriven&quot;, &quot;Cylinder&quot;, &quot;Channel&quot;, &quot;Airfoil&quot;</code>.</li><li><code>:u_in</code> the inlet velocity for <code>&quot;Airfoil&quot;</code> and <code>&quot;Cylinder&quot;</code>, or the lid velocity for <code>&quot;LidDriven</code></li><li><code>:c</code> chord length in the <code>&quot;Airfoil&quot;</code> case, or dimension of lid for <code>&quot;LidDriven&quot;</code>. It is used to compute the viscosity <code>:ν</code> from the Reynolds and velocity</li><li><code>:Re</code> Reynolds number. </li><li><code>:ν</code> kinematic viscosity. It can be overwritten in order to satisfy the Reynolds, in this case a warning informs the user.</li><li><code>:ρ</code> density. It used just to compute the force. The advice is to keep it <code>1.0</code> and just set the Reynolds.</li><li><code>:body_force</code> is non-zero generally just for the case of a periodic channel.</li><li><code>:periodic</code> used only in the <code>&quot;Channel&quot;</code> case. It can be set <code>true</code> or <code>false</code></li></ul><p>Time settings</p><ul><li><code>:t0</code> = starting time.</li><li><code>:dt</code> = time step length.</li><li><code>:tF</code> = end time.</li><li><code>:t_endramp</code> = for high reynolds cases, like airfoils and lid driven, for improving numeric stability the inlet velocity (or the lid velocity) are increased from 0 up the desired value in the time between :t0 and :t<em>endramp. If :t0 = :t</em>endramp there is no ramping.</li></ul><p>Ode Settings</p><ul><li><code>:ode_method</code> = can be <code>:ThetaMethod</code> or <code>:AlphaMethod</code>.</li><li><span>$:θ$</span> = parameter required if <code>:ThetaMethod</code> is selected. It can a be single float, es <code>1.0</code> or a vector <code>[0.5, 1.0]</code>. In the case in the example it means that a <span>$θ = 0.5$</span> is used for velocity and <span>$θ = 1.0$</span> is used for pressure.</li><li><code>:ρ∞</code> = parameter required if <code>:ThetaMethod</code> is selected, it controls the numeric viscosity. A suggested value is <code>ρ∞ = 0.8</code></li></ul><p>Numeric Settings</p><ul><li><code>:solver</code> for solving the equations, it can be <code>:julia</code> or <code>:petsc</code>. The general advice is to use <code>:petsc</code> expecially in <code>MPI</code></li><li><code>:method</code> can be <code>:SUPG</code> or <code>:VMS</code></li><li><code>:Cᵢ</code> is a vector containing stabilization coefficients used for the <code>:VMS</code>. The suggested values are <code>[4,36]</code>, 10.1016/j.compfluid.2008.10.003</li><li><code>:options</code> the settings for the petsc solver. It call the function <code>petsc_options(args)</code>, where <code>args</code> can be <code>:ksplu</code>, <code>:kspgamg</code> for linear case, <code>:sneslu</code>, <code>:snesgamg</code> for a non linear case. For a more detail explanation <a href="@ref"><code>petsc_options</code></a></li><li><code>:linear</code> can be <code>true</code> or <code>false</code>. It linearizes the convective term using a Taylor expansion</li><li><code>:steady</code> is set to <code>false</code>. At the moment is not implemented <code>steady</code> solution of the equations </li></ul><p>Print Settings</p><ul><li><code>:printmodel</code> can be <code>true</code> or <code>false</code>. If <code>true</code> mesh is saved as a .pvtu file.</li><li><code>:printinitial</code> can be <code>true</code> or <code>false</code>. If <code>true</code> saves the flowfield at <code>t0</code>. It is useful when restarting from a previous solution.</li><li><code>:benchmark_mode</code> =&gt; can be <code>true</code> or <code>false</code>. If <code>true</code> it does not print the solution, and it gives the time needed for computing the iteration form the 2nd till the end. The first iteration is not taken into account for computing the time because of precompilation.</li></ul><p>Mesh Settings</p><ul><li><code>:mesh_gen</code> can be <code>true</code> or <code>false</code>. It has to be set <code>true</code> for cases where the mesh is read from a <code>.msh</code> file.</li><li><code>:mesh_file</code> is a string with the name of the <code>.msh</code> that can be read. By default it points to the folder <code>/models</code> of the package.</li></ul><p>Partitioning Settings</p><ul><li><code>:np_i</code> set the number of division in the <code>i</code> axes for carthesian problems. For non cartesian problems it does not matter how the cores are split into the dimensions as long as:<ul><li>in the 2D case <code>:np_x * :np_y</code> has to equal to the <code>MPI</code> ranks.</li><li>in the 3D case <code>:np_x * :np_y * :np_z</code> has to equal to the <code>MPI</code> ranks.</li></ul></li><li><code>backend</code> can be <code>MPIBackend()</code> or <code>SequentialBackend()</code>. </li></ul><p>Restarting Settings</p><ul><li><code>:restart</code> can be <code>true</code> or <code>false</code>. If <code>false</code> the initial conditions are computed internally using <code>:u_in</code> or analytical solution (<code>&quot;TaylorGreen&quot;</code>). </li><li><code>:restart_file</code> is used only if <code>:restart</code>is true. It is a <code>.csv</code> file created from ParaView using the SpreadSheet. It has the list of fo velocity and pressure in each node. It is better to run <code>clean grid</code> in Paraview before for get rid of duplicate points.</li></ul><p>Turbulence Settings For creating turbulence the package <a href="https://github.com/carlodev/SyntheticEddyMethod.jl"><code>SyntheticEddyMethod</code></a> is used.</p><ul><li><code>:start_condition</code> for the channel, still work in progress.</li><li><code>:TI</code> Turbulence Intensity for the inlet. If it is set <code>0.0</code> it means no turbulence.</li><li><code>:Vbox =&gt; turbulence_box()</code> contains the information of the virtual box where the Eddies are created. More details in the documentation of <a href="https://github.com/carlodev/SyntheticEddyMethod.jl"><code>SyntheticEddyMethod</code></a>. The parameters can be adjsuted in <code>Turbulence_Settings.jl</code> file. </li><li><code>:Re_filename</code> it contains the string of the Reynolds stress file, which is a <code>.xlsx</code> file. If you want to create turbulence from the <code>:TI</code> parameters set it to <code>&quot;none&quot;</code></li></ul><pre><code class="language-Example hljs">using ExoFlow
using PartitionedArrays
include(&quot;Turbulence_Settings.jl&quot;)

backend = SequentialBackend() #or MPIBackend() SequentialBackend()
function instantiate_parameters()
    parameters = Dict(
    :N =&gt; 100,
    :D =&gt; 2, #Dimension
    :order =&gt; 1,
    
    :t0 =&gt; 0.0,
    :dt =&gt; 0.01,
    :tF =&gt; 0.05,
    :t_endramp =&gt; 0.0,

    :case =&gt; &quot;TaylorGreen&quot;,
    :solver =&gt; :petsc,
    :method =&gt; :VMS,
    :ode_method =&gt; :ThetaMethod,
    :θ=&gt;[0.5, 1.0],
    :ρ∞ =&gt; 1.0,
    :Re =&gt; 1_000,
    :c =&gt; 1, #chord lenght [m], used for naca (=1), cylinder (=0.1), liddriven = (1), 0.5
    :u_in =&gt; 1.0,  # =1.0 for lid driven 
    
    :periodic =&gt; false,

    :printmodel =&gt; false,
    
    :mesh_gen =&gt; false,

    :linear =&gt; true,
    :steady =&gt; false,

    :debug_mode =&gt; false,
    :benchmark_mode =&gt; false,
    :printinitial =&gt; false,

    :mesh_file =&gt; &quot;DU89_i_2D.msh&quot;,
    :Cᵢ =&gt; [4, 36],    
    :options =&gt; petsc_options(:ksplu),

    :nls_trace =&gt;true,
    :nls_iter =&gt; 20,

    :ν =&gt; 1.0e-5,  #channel = 0.0001472, 
    :ρ =&gt; 1.0, #kg/m3 density
    :body_force =&gt; 0.0, #channel = 0.00337204
    
    :np_x =&gt; 2, #number of processors in X
    :np_y =&gt; 2, #number of processors in Y
    :np_z =&gt; 1, #number of processors in Z

    :start_condition =&gt; :turbulent,
    :restart =&gt; false,
    :restart_file =&gt; &quot;DU89_0p85.csv&quot;,
    :TI =&gt;0.01,
    :Vbox =&gt; turbulence_box(),
    :Re_filename =&gt; &quot;none&quot;
      )

    parameters = initialize_parameters(parameters)
    
    return parameters
end

params = instantiate_parameters()


ExoFlow.main((params, backend))</code></pre><p>The example above run in the <code>REPL</code> emulating a parallel run over 4 processors (you can see it by the options <code>:np_x</code> and <code>:np_y</code>).  The final results is a .pvd file, which can be open with ParaView. It is an index file of .pvtu files in <code>Results/</code> folder. Each .pvtu file is the solution at a single time step and each .pvtu is and index file of .pvtu files. Each of this .vtu files is the portion of one processor of the solution of a spefic time step.</p><div class="admonition is-info"><header class="admonition-header">numeric info</header><div class="admonition-body"><p>Changing the backend to <code>MPIBackend()</code> allows it to run in MPI. </p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../mpi/">MPI Run »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Saturday 25 March 2023 12:58">Saturday 25 March 2023</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
